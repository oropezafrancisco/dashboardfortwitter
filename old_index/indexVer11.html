<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Frontend Coding Challenge</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
        <link rel="stylesheet" type="text/css" href="stylesV02.css">
        <script src="/reload/reload.js"></script>
        <script src="/funtions.js"></script>

    </head>
<body>

<script>
//def Var
var arrayTwitter = [];
var arrayRefresh = [];
var tuis; // change in JSON
var timeOfRefresh = "60"; //default change in JSON
//def Var
</script>


<meta id="meta01" http-equiv="Refresh" >

<div id="menu">
  <button type="button" onclick="menuOnOff()">&equiv;</button>
  <form id='menuconfig'>
      <div id='menu001'></div>
  </form>
  <script>document.getElementById('menuconfig').style.display ="none";</script>
</div>



<!-- main -->
<div id="body01"></div>
<!-- end main -->




<script>
// start time and number of tweets
$.getJSON('listTimeNumberTweets.json', function (data) {

                $.each(data, function (index, value) {
                      arrayRefresh.push(value);
                });
var tuis =arrayRefresh[0];
var timeOfRefresh = arrayRefresh[1];
document.getElementById("meta01").setAttribute("content", timeOfRefresh);


// star NAME search
$.getJSON('listNameTwitter.json', function (data) {

                $.each(data, function (index, value) {
                      arrayTwitter.push(value);
                });

                var col = [];
                for (var i = 0; i < arrayTwitter.length; i++) {
                    for (var key in arrayTwitter[i]) {
                        if (col.indexOf(key) === -1) { col.push(key) }
                    }
                };
                //Table Master *************


                madetable1(arrayTwitter.length,"body01");//Table Master *************


                //Table Master *************

                for (var i = 0; i < arrayTwitter.length; i++) {
                  var divContainer = document.getElementById("TitleNombre0"+i);
                  divContainer.innerHTML = "@"+arrayTwitter[i];


                };


//init cicle columns*******************
for (var k = 0; k < arrayTwitter.length; k++) {

          $(document).ready(function () {
//zona var*************************
              var url1="http://localhost:7890/1.1/statuses/user_timeline.json?count="+tuis+"&screen_name="+arrayTwitter[k];
              var arrItems = [];
              var table2 = document.createElement("table");
              table2.setAttribute("id","t002");
//zona var END****************
              $.getJSON(url1, function (data) {


                  $.each(data, function (index, value) { arrItems.push(value) });

                  var col = [];
                  for (var i = 0; i < arrItems.length; i++) {
                      for (var key in arrItems[i]) {
                          if (col.indexOf(key) === -1) { col.push(key) };
                      };
                  };


                  var tr = table2.insertRow(-1)
                  {
                      var th = document.createElement("th");
                      th.innerHTML = col[0];
                      th.setAttribute("id","thtitle");
                      tr.appendChild(th);
                      var th = document.createElement("th");
                      th.innerHTML = col[3];
                      th.setAttribute("id","thtitle");
                      tr.appendChild(th);
                      var th = document.createElement("th");
                      th.innerHTML = col[6];
                      th.setAttribute("id","thtitle");
                      tr.appendChild(th);
                  };


                  for (var i = 0; i < arrItems.length; i++)
                  { tr = table2.insertRow(-1);
                      {
                          var tabCell = tr.insertCell(-1);
                          tabCell.setAttribute("id","timedate");
                          var d1 = new Date(arrItems[i][col[0]]);
                          var d2 = d1.toDateString();
                          tabCell.innerHTML = d1.toUTCString();
                          var tabCell = tr.insertCell(-1);
                          tabCell.setAttribute("id","thcontant");
                          tabCell.innerHTML = urlify(arrItems[i][col[3]]);
                          var tabCell = tr.insertCell(-1);
                          tabCell.setAttribute("id","thcontant");
                          tabCell.innerHTML = arrItems[i][col[6]];
                      }
                  };



              });

              var divContainer9 = document.getElementById("Column0"+k);
              divContainer9.innerHTML = '';
              divContainer9.appendChild(table2);

          });

//****************** push here end for************* eye *************
      };
//****************** end for************* eye *************
//***********************************************************

//************************************************************
//****************** end NAME search************* eye *************
});
//****************** end NAME search************* eye *************
//refresh

});
// refresh
</script>

</body>

</html>
